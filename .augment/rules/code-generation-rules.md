---
type: "manual"
---

# Augment AI Code Generation Rules

This document defines the standards and guidelines for all code generated by Augment AI in this project.

## Code Wrapping Standards

All Augment AI generated code must be wrapped with start/end comments that include:
1. Language-appropriate comment syntax
2. Timestamp of generation
3. Purpose/type of the generated code

### Comment Format Template

```
[COMMENT_START] -- start -- Augment AI generated [TYPE] [TIMESTAMP] --
[COMMENT_START] Purpose: [BRIEF_DESCRIPTION]
[GENERATED_CODE_HERE]
[COMMENT_START] -- end -- Augment AI generated [TYPE] --
```

## Language-Specific Comment Syntax Rules

### Rule: Use appropriate comment syntax for each language

| Language | Comment Syntax | Format |
|----------|----------------|---------|
| Kotlin/Java/JavaScript/TypeScript | `//` | `// -- start -- Augment AI generated [TYPE] [DATE] --` |
| Python/Shell/YAML | `#` | `# -- start -- Augment AI generated [TYPE] [DATE] --` |
| SQL | `/* */` | `/* -- start -- Augment AI generated [TYPE] [DATE] -- */` |
| HTML/XML | `<!-- -->` | `<!-- start -- Augment AI generated [TYPE] [DATE] -->` |
| CSS/SCSS | `/* */` | `/* -- start -- Augment AI generated [TYPE] [DATE] -- */` |
| Dockerfile | `#` | `# -- start -- Augment AI generated [TYPE] [DATE] --` |

### Rule: Always include purpose line

- Second line must contain: `[COMMENT_SYNTAX] Purpose: [BRIEF_DESCRIPTION]`
- Purpose should be clear and specific (10-50 characters)
- Use active voice: "Creates user service" not "User service creation"

### Rule: Use consistent end markers

- End marker format: `[COMMENT_SYNTAX] -- end -- Augment AI generated [TYPE] --`
- Must match the type specified in start marker
- Update timestamp when code is modified

### Rule: Track modifications to existing AI-generated code

- When modifying existing AI-generated code, add a modification tracking line
- Format: `[COMMENT_SYNTAX] Last modified: [DATE] - [BRIEF_SUMMARY]`
- Place after the purpose line, before the actual code
- Update the end marker timestamp to match the modification date
- Keep the original purpose, but update if the code's purpose has significantly changed

## Code Type Markers

Use specific markers to identify the type of generated code:

### Backend Services
- `service` - Business logic services
- `repository` - Data access layer
- `controller` - REST API controllers
- `config` - Configuration classes
- `entity` - Data models/entities
- `dto` - Data transfer objects

### Frontend Components
- `component` - UI components
- `hook` - React hooks or similar
- `utility` - Helper functions
- `styles` - CSS/styling code
- `test` - Frontend tests

### Database
- `migration` - Database migrations
- `schema` - Schema definitions
- `query` - Complex queries
- `procedure` - Stored procedures

### Infrastructure
- `dockerfile` - Docker configurations
- `compose` - Docker Compose files
- `k8s` - Kubernetes manifests
- `terraform` - Infrastructure as code

### Testing
- `unit-test` - Unit tests
- `integration-test` - Integration tests
- `e2e-test` - End-to-end tests
- `mock` - Mock implementations

### Documentation
- `api-doc` - API documentation
- `readme` - README files
- `guide` - User guides

## Additional Guidelines

### 1. Purpose Description
Always include a brief, clear purpose statement:
- ✅ Good: "Purpose: Elastic pool configuration service"
- ✅ Good: "Purpose: User authentication middleware"
- ❌ Bad: "Purpose: Code for handling stuff"

### 2. Timestamp Format
Use ISO date format: `YYYY-MM-DD`

### 3. Code Organization
- Keep generated code blocks focused and cohesive
- If generating multiple related pieces, use separate comment blocks
- For large generated sections, consider breaking into smaller, logical chunks

### 4. Single File Per Class Rule

**When creating or refactoring Kotlin/Java code, follow the single file per class principle:**

- ✅ **DO**: Create separate files for each class and data class
- ✅ **DO**: Keep enums with the class that primarily uses them (e.g., `DatabaseType` with `ElasticPoolDatabaseConfig`)
- ✅ **DO**: Create separate enum files only when used by multiple unrelated classes
- ✅ **DO**: Use descriptive file names that match the primary class name
- ❌ **DON'T**: Put multiple unrelated classes in one file
- ❌ **DON'T**: Create files with generic names like "Utils.kt" or "Dtos.kt"

**Example Structure:**

```text
dto/
├── TenantDatabase.kt              # Single data class
├── ElasticPoolDatabaseConfig.kt   # Config class + DatabaseType enum (used only by this class)
├── ETLResult.kt                   # Result class + related TenantETLResult type
└── PoolHealthStatus.kt            # Single data class
```

**Benefits:**

- Improved code navigation and IDE support
- Better maintainability and readability
- Easier code reviews and refactoring
- Clear separation of concerns
- Enhanced team collaboration

### 5. Team Collaboration

- These comments help identify AI-generated code during code reviews
- Make it easier to track and maintain AI-generated portions
- Facilitate knowledge transfer between team members

### 6. .augment Directory Markdown Files

**When creating markdown files for the `.augment` directory, always include a confirmation line at the end:**

**Rule**: Every markdown file in the `.augment` directory must end with an agent confirmation line that provides feedback when the file is read during session initialization.

**Format Template:**
```markdown
---

**AGENT CONFIRMATION**: ✅ Successfully read `.augment/[FILENAME]` - [BRIEF_DESCRIPTION_OF_WHAT_WAS_LOADED].
```

**Examples:**

For session automation files:
```markdown
**AGENT CONFIRMATION**: ✅ Successfully read `.augment/session-automation.md` - Session automation rules loaded and ready for execution.
```

For code generation files:
```markdown
**AGENT CONFIRMATION**: ✅ Successfully read `.augment/code-generation-rules.md` - Code generation standards loaded and will be applied to all generated code.
```

For project configuration files:
```markdown
**AGENT CONFIRMATION**: ✅ Successfully read `.augment/project-config.md` - Project configuration settings loaded and active.
```

**Benefits:**
- **Transparency**: Clear visibility that automation files are being read
- **Debugging**: Easy to identify if configuration files weren't loaded
- **Confidence**: Users know the rules and settings are active
- **Accountability**: Explicit confirmation of rule compliance

## Examples by Project Context

### Spring Boot Service
```kotlin
// -- start -- Augment AI generated service [2025-08-12] --
// Purpose: Tenant database configuration management
@Service
class TenantConfigService(
    private val tenantConfigRepository: TenantConfigRepository
) {
    suspend fun updateElasticPoolNames() {
        // implementation
    }
}
// -- end -- Augment AI generated service --
```

### React Component
```typescript
// -- start -- Augment AI generated component [2025-08-12] --
// Purpose: Tenant dashboard summary widget
interface TenantSummaryProps {
    tenantId: number;
}

const TenantSummary: React.FC<TenantSummaryProps> = ({ tenantId }) => {
    return <div>Summary for tenant {tenantId}</div>;
};
// -- end -- Augment AI generated component --
```

### Database Migration
```sql
/* -- start -- Augment AI generated migration [2025-08-12] -- */
/* Purpose: Add audit columns for elastic pool tracking */
ALTER TABLE etl_config.tenant_database_configs 
ADD COLUMN pool_updated_date TIMESTAMP DEFAULT NULL,
ADD COLUMN pool_name_source VARCHAR(50) DEFAULT 'migration';
/* -- end -- Augment AI generated migration -- */
```

## Enforcement

This standard should be:
1. Applied consistently by all team members when requesting AI code generation
2. Checked during code reviews
3. Used as a reference for maintaining AI-generated code
4. Updated as the project evolves

---

## Examples with Best Practice Prompts

### Kotlin/Java/JavaScript/TypeScript Example

**Best Practice Prompt:**
> "Create a Spring Boot service class for managing elastic pool configurations. Include dependency injection and proper error handling."

**Generated Code:**
```kotlin
// -- start -- Augment AI generated service [2025-08-12] --
// Purpose: Elastic pool configuration service
@Service
class ElasticPoolService {
    fun updatePoolConfiguration() {
        // implementation
    }
}
// -- end -- Augment AI generated service --
```

### Python Example

**Best Practice Prompt:**
> "Create a Python utility function for processing tenant data with proper type hints and error handling."

**Generated Code:**
```python
# -- start -- Augment AI generated utility [2025-08-12] --
# Purpose: Data processing utility functions
def process_tenant_data(tenant_id: int) -> dict:
    return {"processed": True, "tenant_id": tenant_id}
# -- end -- Augment AI generated utility [2025-08-12] --
```

### SQL Example

**Best Practice Prompt:**
> "Create a database migration to add elastic pool tracking columns to the tenant_database_configs table with proper constraints and comments."

**Generated Code:**
```sql
/* -- start -- Augment AI generated migration [2025-08-12] -- */
/* Purpose: Add elastic pool environment support */
ALTER TABLE etl_config.tenant_database_configs
ADD COLUMN pool_updated_date TIMESTAMP DEFAULT NULL;
/* -- end -- Augment AI generated migration [2025-08-12] -- */
```

### HTML/XML Example

**Best Practice Prompt:**
> "Create a semantic HTML component for displaying tenant dashboard summary with proper accessibility attributes."

**Generated Code:**
```html
<!-- start -- Augment AI generated component [2025-08-12] -->
<!-- Purpose: User dashboard widget -->
<div class="dashboard-widget">
    <h3>Tenant Summary</h3>
    <p>Pool assignments and status</p>
</div>
<!-- end -- Augment AI generated component [2025-08-12] -->
```

### CSS Example

**Best Practice Prompt:**
> "Create responsive CSS grid styles for a tenant dashboard that works on mobile and desktop with proper spacing."

**Generated Code:**
```css
/* -- start -- Augment AI generated styles [2025-08-12] -- */
/* Purpose: Responsive grid layout for tenant dashboard */
.tenant-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
}
/* -- end -- Augment AI generated styles [2025-08-12] -- */
```

### Modification Tracking Example

**Original Code (Generated 2025-08-12):**
```kotlin
// -- start -- Augment AI generated service [2025-08-12] --
// Purpose: User management service
@Service
class UserService {
    fun createUser() {
        // original implementation
    }
}
// -- end -- Augment AI generated service [2025-08-12] --
```

**Best Practice Prompt for Modification:**
> "Add authentication methods to the existing UserService and update the error handling."

**Modified Code (Updated 2025-08-15):**
```kotlin
// -- start -- Augment AI generated service [2025-08-12] --
// Purpose: User management service with authentication
// Last modified: 2025-08-15 - Added authentication methods and improved error handling
@Service
class UserService {
    fun createUser() {
        // original implementation
    }

    fun authenticateUser(credentials: UserCredentials): AuthResult {
        // added authentication logic
    }
}
// -- end -- Augment AI generated service [2025-08-15] --
```

**Key Changes Made:**
- Updated purpose line to reflect new functionality
- Added modification tracking line with date and summary
- Updated end marker timestamp to match modification date
- Preserved original code structure while adding new methods

---

*This file should be committed to version control and shared with all team members.*

---

**AGENT CONFIRMATION**: ✅ Successfully read `.augment/code-generation-rules.md` - Code generation standards loaded and will be applied to all generated code.
